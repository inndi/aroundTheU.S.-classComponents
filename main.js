!function(){"use strict";var e={937:function(e,t,s){e.exports=s.p+"4e8e0a1d604782a0dff8.svg"}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,s),o.exports}s.p="",function(){var e=s(937);const t=document.querySelector(".page"),r=t.querySelector(".profile"),n=r.querySelector(".profile__name"),o=r.querySelector(".profile__about-me"),i=r.querySelector(".profile__edit-btn"),a=r.querySelector(".profile__add-btn"),l=t.querySelector(".popup_edit"),c=t.querySelector(".popup_add"),h=t.querySelector(".popup_delete"),u=document.querySelector(".profile__photo"),p=document.querySelector(".popup_edit-photo"),_=p.querySelector(".popup__form"),d=document.querySelector(".profile__edit-avatar-btn"),m=h.querySelector(".popup__save-btn"),v=document.querySelector(".popup_card"),k=l.querySelector(".popup__form"),f=l.querySelector(".popup__input_field_name"),C=l.querySelector(".popup__input_field_about-me"),b=c.querySelector(".popup__form"),L=t.querySelector(".cards__list");class E{constructor(e,t){this._formSelector=e.formSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(e.inputSelector)),this._buttonElement=this._formElement.querySelector(e.submitButtonSelector)}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}_setEventListeners(){this._toggleButtonState(this._inputList,this._buttonElement),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputList,this._buttonElement)}))}))}disableButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}_toggleButtonState(e,t){this._hasInvalidInput(e)?this.disableButton():(t.classList.remove(this._inactiveButtonClass),t.removeAttribute("disabled"))}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_showInputError(e,t){const s=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}resetValidation(){this._toggleButtonState(this._inputList,this._buttonElement),this._inputList.forEach((e=>{this._hideInputError(e)}))}}function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class g{constructor(e){y(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),y(this,"_handleClickClose",(e=>{e.target.classList.contains("popup_opened")&&this.close(),e.target.classList.contains("popup__close-btn")&&this.close()})),this._popup=e}open(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("popup_opened")}close(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}setEventListeners(){this._popup.addEventListener("mousedown",this._handleClickClose)}}class S extends g{constructor(e){let{somePopup:t,callBack:s}=e;super(t),this._callBack=s,this._fields=this._popup.querySelectorAll(".popup__input"),this._popupForm=this._popup.querySelector(".popup__form"),this._saveBtn=this._popup.querySelector(".popup__save-btn")}getInputValues(){const e={};return this._fields.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._callBack(this._saveBtn)})),super.setEventListeners()}switchBtnToCreate(){this._saveBtn.textContent="Create"}switchBtnToSave(){this._saveBtn.textContent="Save"}close(){super.close(),this._popupForm.reset()}}class B{constructor(e){let{cardData:t,cardTemplate:s,handleCardClick:r,handleBinClick:n,handleLikeClick:o}=e;var i,a;a=()=>{this._element.remove()},(i="_handleDeleteButton")in this?Object.defineProperty(this,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[i]=a,this._name=t.name,this._link=t.link,this._handleCardClick=r,this._cardTemplate=s,this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__img"),this._cardTitle=this._element.querySelector(".card__title"),this._likeButton=this._element.querySelector(".card__like-btn"),this._likesAmount=this._element.querySelector(".card__likes-amount"),this._deleteButton=this._element.querySelector(".card__delete-btn"),this._handleBinClick=n,this._handleLikeClick=o,this._mineCard=t.isMine,this._myNewCard=t.myNewCard,this._cardLikes=t.likes,this._initialLikes=t.likes.length}_getTemplate(){return document.querySelector(this._cardTemplate).content.querySelector(".card").cloneNode(!0)}createCard(){return this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._setEventListeners(),this._addDeleteButtonToNewCard(),this._handleLikeInitAmount(),this._element}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLikeClick),this._deleteButton.addEventListener("click",this._handleBinClick),this._cardImage.addEventListener("mousedown",this._handleCardClick)}addLike(e){this._likeButton.classList.add("card__like-btn_active"),this._likesAmount.textContent=e.length,this._cardLikes=e}removeLike(e){this._likeButton.classList.remove("card__like-btn_active"),this._likesAmount.textContent=e.length,this._cardLikes=e}toggleLike(e){return this._cardLikes.some((t=>t._id===e))}_handleLikeInitAmount(){this._likesAmount.textContent=this._initialLikes}_addDeleteButtonToNewCard(){this._myNewCard&&this._deleteButton.classList.add("card__delete-btn_active")}addDeleteButton(){this._mineCard&&this._deleteButton.classList.add("card__delete-btn_active")}myLike(e){this._cardLikes.forEach((t=>{t._id===e&&this._likeButton.classList.add("card__like-btn_active")}))}}document.getElementById("header-logo").src=e;const q=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}getInitialCards(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>{console.log(e)}))}getMyProfile(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>{console.log(e)}))}delete(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>{console.log(e)}))}postNewCardData(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>{console.log(e)}))}patchProfileData(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.profileName,about:e.profileAbout})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>{console.log(e)}))}patchAvatar(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.value})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>{console.log(e)}))}removeLike(e){return fetch("https://around.nomoreparties.co/v1/group-12/cards/likes/".concat(e),{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>{console.log(e)}))}addLike(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).catch((e=>{console.log(e)}))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"2f92e6f8-d3bf-4f0b-b7c9-ecb844a65d7b","Content-Type":"application/json"}}),w={};var I;I={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-btn",inactiveButtonClass:"popup__save-btn_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},Array.from(document.querySelectorAll(I.formSelector)).forEach((e=>{const t=new E(I,e),s=e.getAttribute("name");w[s]=t,t.enableValidation()}));const P=new class extends g{constructor(e){var t,s;super(e),s=e=>{this._popupCardImage.src=e.target.src,this._popupCardImage.alt=e.target.alt,this._popupCardTitle.textContent=e.target.alt,super.open()},(t="open")in this?Object.defineProperty(this,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):this.open=s,this._popupCardImage=this._popup.querySelector(".popup__card-img"),this._popupCardTitle=this._popup.querySelector(".popup__card-title")}}(v);P.setEventListeners();const x=new g(h);x.setEventListeners();const T=new class extends g{constructor(e){let{somePopup:t,callBack:s}=e;super(t),this._callBack=s,this._field=this._popup.querySelector(".popup__input"),this._popupForm=this._popup.querySelector(".popup__form"),this._saveBtn=this._popup.querySelector(".popup__save-btn")}setEventListeners(){this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._callBack(this._field,this._saveBtn)})),super.setEventListeners()}switchBtnToSave(){this._saveBtn.textContent="Save"}close(){super.close(),this._popupForm.reset()}}({somePopup:p,callBack:(e,t)=>{t.textContent="Saving...",q.patchAvatar(e).then((()=>{u.src=e.value,T.close()}))}});function A(e){const t=new B({cardData:e,cardTemplate:"#card-template",handleCardClick:e=>{P.open(e)},handleBinClick:()=>{x.open(),m.onclick=()=>{q.delete(e._id).then((()=>{t._handleDeleteButton(),x.close()}))}},handleLikeClick:()=>{q.getMyProfile().then((s=>{t.toggleLike(s._id)?q.removeLike(e._id).then((e=>{t.removeLike(e.likes)})):q.addLike(e._id).then((e=>{t.addLike(e.likes)}))}))}});return q.getMyProfile().then((e=>{t.myLike(e._id)})),t.addDeleteButton(),t.createCard()}T.setEventListeners();const j=new class{constructor(e,t){let{renderer:s}=e;this.renderer=s,this._container=t}_clear(){this._container.innerHTML=""}addPrependItem(e){this._container.prepend(e)}addAppendItem(e){this._container.append(e)}}({renderer:e=>{if(e.myNewCard){const t=A(e);j.addPrependItem(t)}else{const t=A(e);j.addAppendItem(t)}}},L),D=new class{constructor(e,t){this._name=e,this._about=t}getUserInfo(){const e={};return e.name=this._name.textContent,e.about=this._about.textContent,e}setUserInfo(e){this._name.textContent=e.profileName,this._about.textContent=e.profileAbout}}(n,o),N=new S({somePopup:l,callBack:e=>{e.textContent="Saving...";const t=N.getInputValues();D.setUserInfo(t),q.patchProfileData(t).then((()=>{N.close()}))}});N.setEventListeners();const U=new S({somePopup:c,callBack:e=>{e.textContent="Creating...";const t=U.getInputValues(),s={};s.name=t.placeTitle,s.link=t.placeLink,q.postNewCardData(s).then((e=>{e.myNewCard=!0,j.renderer(e),U.close()}))}});U.setEventListeners(),i.addEventListener("click",(()=>{const e=D.getUserInfo();f.value=e.name,C.value=e.about,w[k.getAttribute("name")].resetValidation(),N.switchBtnToSave(),N.open()})),a.addEventListener("click",(()=>{w[b.getAttribute("name")].resetValidation(),U.switchBtnToCreate(),U.open()})),d.addEventListener("click",(()=>{w[_.getAttribute("name")].resetValidation(),T.switchBtnToSave(),T.open()})),(async()=>{await q.getMyProfile().then((e=>{u.src=e.avatar,n.textContent=e.name,o.textContent=e.about,q.getInitialCards().then((t=>{t.forEach((t=>{t.owner._id===e._id&&(t.isMine=!0),j.renderer(t)}))}))}))})()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TXBGLE1BQVF1RCxFQUFVdkQsTUFDL0I2QixFQUFLaEQsUUFBUyxHQUVoQjJFLEVBQWFFLFNBQVM3QixhQU1sQ3dELEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZXMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoQXZhRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpO1xuXG5jb25zdCBwcm9maWxlID0gYm9keS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZScpO1xuY29uc3QgcHJvZmlsZU5hbWUgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XG5jb25zdCBwcm9maWxlSW5mbyA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Fib3V0LW1lJyk7XG5jb25zdCBlZGl0QnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idG4nKTtcbmNvbnN0IGFkZEJ1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idG4nKTtcblxuY29uc3QgcG9wdXBFZGl0ID0gYm9keS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZWRpdCcpO1xuY29uc3QgcG9wdXBBZGQgPSBib2R5LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9hZGQnKTtcbmNvbnN0IHBvcHVwRGVsZXRlID0gYm9keS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZGVsZXRlJyk7XG5cbmNvbnN0IHBob3RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3Bob3RvJyk7XG5jb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZWRpdC1waG90bycpO1xuY29uc3QgcG9wdXBFZGl0QXZhRm9ybSA9IHBvcHVwRWRpdEF2YXRhci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbmNvbnN0IGVkaXRBdmF0YXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1hdmF0YXItYnRuJyk7XG5cbmNvbnN0IHBvcHVwRGVsZXRlWWVzQnV0dG9uID0gcG9wdXBEZWxldGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlLWJ0bicpO1xuXG5jb25zdCBwb3B1cENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfY2FyZCcpO1xuXG5jb25zdCBwb3B1cEVkaXRGb3JtID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuY29uc3QgZmllbGROYW1lID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfZmllbGRfbmFtZScpO1xuY29uc3QgZmllbGRBYm91dE1lID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfZmllbGRfYWJvdXQtbWUnKTtcblxuY29uc3QgcG9wdXBBZGRGb3JtID0gcG9wdXBBZGQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG5cbmNvbnN0IGNhcmRzTGlzdCA9IGJvZHkucXVlcnlTZWxlY3RvcignLmNhcmRzX19saXN0Jyk7XG5cbmNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc2F2ZS1idG5cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc2F2ZS1idG5fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxufTtcblxuZXhwb3J0IHtcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVJbmZvLFxuICBlZGl0QnV0dG9uLFxuICBhZGRCdXR0b24sXG4gIHBvcHVwRWRpdCxcbiAgcG9wdXBBZGQsXG4gIHBvcHVwQ2FyZCxcbiAgcG9wdXBFZGl0Rm9ybSxcbiAgZmllbGROYW1lLFxuICBmaWVsZEFib3V0TWUsXG4gIHBvcHVwQWRkRm9ybSxcbiAgY2FyZHNMaXN0LFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBwb3B1cERlbGV0ZSxcbiAgcG9wdXBEZWxldGVZZXNCdXR0b24sXG4gIHBob3RvQ29udGFpbmVyLFxuICBwb3B1cEVkaXRBdmF0YXIsXG4gIGVkaXRBdmF0YXJCdG4sXG4gIHBvcHVwRWRpdEF2YUZvcm1cbn07IiwiXG5leHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9ycywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZWxlY3RvcnMuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZWxlY3RvcnMuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZWxlY3RvcnMuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZWxlY3RvcnMuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMuaW5wdXRTZWxlY3RvcikpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHsgZXZ0LnByZXZlbnREZWZhdWx0KCkgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRMaXN0LCB0aGlzLl9idXR0b25FbGVtZW50KTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fYnV0dG9uRWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBkaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICBidXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9O1xuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9O1xuICB9O1xuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH07XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fYnV0dG9uRWxlbWVudCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9O1xufVxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc29tZVBvcHVwKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBzb21lUG9wdXA7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gIH1cblxuICBfaGFuZGxlQ2xpY2tDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfTtcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idG4nKSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKTtcbiAgfVxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgc29tZVBvcHVwLCBjYWxsQmFjayB9KSB7XG4gICAgc3VwZXIoc29tZVBvcHVwKTtcbiAgICB0aGlzLl9jYWxsQmFjayA9IGNhbGxCYWNrO1xuICAgIHRoaXMuX2ZpZWxkcyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9zYXZlQnRuID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlLWJ0bicpO1xuICB9XG4gIGdldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZpZWxkc0xpc3QgPSB7fTtcbiAgICB0aGlzLl9maWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgIGZpZWxkc0xpc3RbZmllbGQubmFtZV0gPSBmaWVsZC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gZmllbGRzTGlzdDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fY2FsbEJhY2sodGhpcy5fc2F2ZUJ0bik7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHN3aXRjaEJ0blRvQ3JlYXRlKCkge1xuICAgIHRoaXMuX3NhdmVCdG4udGV4dENvbnRlbnQgPSAnQ3JlYXRlJztcbiAgfVxuXG4gIHN3aXRjaEJ0blRvU2F2ZSgpIHtcbiAgICB0aGlzLl9zYXZlQnRuLnRleHRDb250ZW50ID0gJ1NhdmUnO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xuXG4gIGNvbnN0cnVjdG9yKHsgY2FyZERhdGEsIGNhcmRUZW1wbGF0ZSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVCaW5DbGljaywgaGFuZGxlTGlrZUNsaWNrIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gY2FyZFRlbXBsYXRlO1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltZycpO1xuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RpdGxlJyk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnRuJyk7XG4gICAgdGhpcy5fbGlrZXNBbW91bnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlcy1hbW91bnQnKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUtYnRuJyk7XG4gICAgdGhpcy5faGFuZGxlQmluQ2xpY2sgPSBoYW5kbGVCaW5DbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5fbWluZUNhcmQgPSBjYXJkRGF0YS5pc01pbmU7XG4gICAgdGhpcy5fbXlOZXdDYXJkID0gY2FyZERhdGEubXlOZXdDYXJkO1xuICAgIHRoaXMuX2NhcmRMaWtlcyA9IGNhcmREYXRhLmxpa2VzO1xuICAgIHRoaXMuX2luaXRpYWxMaWtlcyA9IGNhcmREYXRhLmxpa2VzLmxlbmd0aDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkVGVtcGxhdGUpXG4gICAgICAuY29udGVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9hZGREZWxldGVCdXR0b25Ub05ld0NhcmQoKVxuICAgIHRoaXMuX2hhbmRsZUxpa2VJbml0QW1vdW50KCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlTGlrZUNsaWNrKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVCaW5DbGljayk7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZUNhcmRDbGljayk7XG4gIH1cblxuXG4gIGFkZExpa2UobGlrZXMpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2xpa2UtYnRuX2FjdGl2ZScpO1xuICAgIHRoaXMuX2xpa2VzQW1vdW50LnRleHRDb250ZW50ID0gbGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX2NhcmRMaWtlcyA9IGxpa2VzO1xuICB9XG5cbiAgcmVtb3ZlTGlrZShsaWtlcykge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9fbGlrZS1idG5fYWN0aXZlJyk7XG4gICAgdGhpcy5fbGlrZXNBbW91bnQudGV4dENvbnRlbnQgPSBsaWtlcy5sZW5ndGg7XG4gICAgdGhpcy5fY2FyZExpa2VzID0gbGlrZXM7XG4gIH1cblxuICB0b2dnbGVMaWtlKG15SWQpIHtcbiAgICBjb25zdCBpc015TGlrZSA9IHRoaXMuX2NhcmRMaWtlcy5zb21lKGxpa2UgPT4gbGlrZS5faWQgPT09IG15SWQpO1xuICAgIHJldHVybiBpc015TGlrZTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSW5pdEFtb3VudCgpIHtcbiAgICB0aGlzLl9saWtlc0Ftb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2luaXRpYWxMaWtlcztcbiAgfVxuXG4gIF9hZGREZWxldGVCdXR0b25Ub05ld0NhcmQoKSB7XG4gICAgaWYgKHRoaXMuX215TmV3Q2FyZCkge1xuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2RlbGV0ZS1idG5fYWN0aXZlJyk7XG4gICAgfVxuICB9XG5cbiAgYWRkRGVsZXRlQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLl9taW5lQ2FyZCkge1xuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2RlbGV0ZS1idG5fYWN0aXZlJyk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgbXlMaWtlKG15SWQpIHtcbiAgICB0aGlzLl9jYXJkTGlrZXMuZm9yRWFjaCgobGlrZSkgPT4ge1xuICAgICAgaWYgKGxpa2UuX2lkID09PSBteUlkKSB7XG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZS1idG5fYWN0aXZlJyk7XG4gICAgICB9O1xuICAgIH0pXG4gIH1cbn0iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IGhlYWRlckxvZ29TcmMgZnJvbSBcIi4uL2ltYWdlcy9sb2dvLnN2Z1wiO1xuXG5jb25zdCBoZWFkZXJMb2dvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXItbG9nb1wiKTtcbmhlYWRlckxvZ28uc3JjID0gaGVhZGVyTG9nb1NyYztcblxuaW1wb3J0IHtcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVJbmZvLFxuICBlZGl0QnV0dG9uLFxuICBhZGRCdXR0b24sXG4gIHBvcHVwRWRpdCxcbiAgcG9wdXBBZGQsXG4gIHBvcHVwQ2FyZCxcbiAgcG9wdXBFZGl0Rm9ybSxcbiAgZmllbGROYW1lLFxuICBmaWVsZEFib3V0TWUsXG4gIHBvcHVwQWRkRm9ybSxcbiAgY2FyZHNMaXN0LFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBwb3B1cERlbGV0ZSxcbiAgcG9wdXBEZWxldGVZZXNCdXR0b24sXG4gIHBob3RvQ29udGFpbmVyLFxuICBwb3B1cEVkaXRBdmF0YXIsXG4gIGVkaXRBdmF0YXJCdG4sXG4gIHBvcHVwRWRpdEF2YUZvcm1cbn0gZnJvbSAnLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMnO1xuXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VzLmpzJztcbmltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgUG9wdXBXaXRoQXZhRm9ybSB9IGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoQXZhRm9ybS5qc1wiO1xuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanNcIjtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCIyZjkyZTZmOC1kM2JmLTRmMGItYjdjOS1lY2I4NDRhNjVkN2JcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICB9XG59KTtcblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKCduYW1lJyk7XG5cbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xuXG5jb25zdCBwb3B1cENhcmRSZW5kZXJlciA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cENhcmQpO1xucG9wdXBDYXJkUmVuZGVyZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBEZWxldGVSZW5kZXJlciA9IG5ldyBQb3B1cChwb3B1cERlbGV0ZSk7XG5wb3B1cERlbGV0ZVJlbmRlcmVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwRWRpdEF2YXRhclJlbmRlcmVyID0gbmV3IFBvcHVwV2l0aEF2YUZvcm0oe1xuICBzb21lUG9wdXA6IHBvcHVwRWRpdEF2YXRhcixcbiAgY2FsbEJhY2s6IChmaWVsZCwgc2F2ZUJ0bikgPT4ge1xuICAgIHNhdmVCdG4udGV4dENvbnRlbnQgPSAnU2F2aW5nLi4uJztcbiAgICBhcGkucGF0Y2hBdmF0YXIoZmllbGQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHBob3RvQ29udGFpbmVyLnNyYyA9IGZpZWxkLnZhbHVlO1xuICAgICAgICBwb3B1cEVkaXRBdmF0YXJSZW5kZXJlci5jbG9zZSgpO1xuICAgICAgfSlcbiAgfVxufSk7XG5wb3B1cEVkaXRBdmF0YXJSZW5kZXJlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICBjYXJkRGF0YTogaXRlbSxcbiAgICBjYXJkVGVtcGxhdGU6ICcjY2FyZC10ZW1wbGF0ZScsXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAoZXZ0KSA9PiB7XG4gICAgICBwb3B1cENhcmRSZW5kZXJlci5vcGVuKGV2dCk7XG4gICAgfSxcbiAgICBoYW5kbGVCaW5DbGljazogKCkgPT4ge1xuICAgICAgcG9wdXBEZWxldGVSZW5kZXJlci5vcGVuKCk7XG4gICAgICBwb3B1cERlbGV0ZVllc0J1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBhcGkuZGVsZXRlKGl0ZW0uX2lkKVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNhcmQuX2hhbmRsZURlbGV0ZUJ1dHRvbigpO1xuICAgICAgICAgICAgcG9wdXBEZWxldGVSZW5kZXJlci5jbG9zZSgpO1xuICAgICAgICAgIH0pXG4gICAgICB9O1xuICAgIH0sXG4gICAgaGFuZGxlTGlrZUNsaWNrOiAoKSA9PiB7XG5cbiAgICAgIGFwaS5nZXRNeVByb2ZpbGUoKVxuICAgICAgICAudGhlbigobXlQcm9maWxlKSA9PiB7XG4gICAgICAgICAgY29uc3QgaXNNeUxpa2UgPSBjYXJkLnRvZ2dsZUxpa2UobXlQcm9maWxlLl9pZCk7XG4gICAgICAgICAgaWYgKGlzTXlMaWtlKSB7XG4gICAgICAgICAgICBhcGkucmVtb3ZlTGlrZShpdGVtLl9pZClcbiAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGNhcmQucmVtb3ZlTGlrZShyZXMubGlrZXMpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcGkuYWRkTGlrZShpdGVtLl9pZClcbiAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGNhcmQuYWRkTGlrZShyZXMubGlrZXMpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9LFxuXG4gIH0pO1xuICBhcGkuZ2V0TXlQcm9maWxlKClcbiAgICAudGhlbigobXlQcm9maWxlKSA9PiB7XG4gICAgICBjYXJkLm15TGlrZShteVByb2ZpbGUuX2lkKTtcbiAgICB9KTtcblxuICBjYXJkLmFkZERlbGV0ZUJ1dHRvbigpO1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuY3JlYXRlQ2FyZCgpO1xuICByZXR1cm4gY2FyZEVsZW1lbnRcbn1cblxuY29uc3QgY2FyZFJlbmRlcmVyID0gbmV3IFNlY3Rpb24oe1xuICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICBpZiAoaXRlbS5teU5ld0NhcmQpIHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcbiAgICAgIGNhcmRSZW5kZXJlci5hZGRQcmVwZW5kSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcbiAgICAgIGNhcmRSZW5kZXJlci5hZGRBcHBlbmRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9XG4gIH1cbn0sIGNhcmRzTGlzdCk7XG5cbmNvbnN0IHVzZXJJbmZvUmVuZGVyZXIgPSBuZXcgVXNlckluZm8ocHJvZmlsZU5hbWUsIHByb2ZpbGVJbmZvKTtcblxuY29uc3QgZWRpdFBvcHVwQmVoYXZpb3IgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHNvbWVQb3B1cDogcG9wdXBFZGl0LFxuICBjYWxsQmFjazogKHNhdmVCdG4pID0+IHtcbiAgICBzYXZlQnRuLnRleHRDb250ZW50ID0gJ1NhdmluZy4uLic7XG4gICAgY29uc3QgZWRpdEZpZWxkcyA9IGVkaXRQb3B1cEJlaGF2aW9yLmdldElucHV0VmFsdWVzKCk7XG5cbiAgICB1c2VySW5mb1JlbmRlcmVyLnNldFVzZXJJbmZvKGVkaXRGaWVsZHMpO1xuICAgIGFwaS5wYXRjaFByb2ZpbGVEYXRhKGVkaXRGaWVsZHMpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGVkaXRQb3B1cEJlaGF2aW9yLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgfVxufSk7XG5lZGl0UG9wdXBCZWhhdmlvci5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhZGRQb3B1cEJlaGF2aW9yID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBzb21lUG9wdXA6IHBvcHVwQWRkLFxuICBjYWxsQmFjazogKHNhdmVCdG4pID0+IHtcbiAgICBzYXZlQnRuLnRleHRDb250ZW50ID0gJ0NyZWF0aW5nLi4uJztcbiAgICBjb25zdCBhZGRGaWVsZHMgPSBhZGRQb3B1cEJlaGF2aW9yLmdldElucHV0VmFsdWVzKCk7XG4gICAgY29uc3QgbmV3Q2FyZCA9IHt9O1xuICAgIG5ld0NhcmQubmFtZSA9IGFkZEZpZWxkcy5wbGFjZVRpdGxlO1xuICAgIG5ld0NhcmQubGluayA9IGFkZEZpZWxkcy5wbGFjZUxpbms7XG5cbiAgICBhcGkucG9zdE5ld0NhcmREYXRhKG5ld0NhcmQpXG4gICAgICAudGhlbigoY2FyZCkgPT4ge1xuICAgICAgICBjYXJkLm15TmV3Q2FyZCA9IHRydWU7XG4gICAgICAgIGNhcmRSZW5kZXJlci5yZW5kZXJlcihjYXJkKTtcbiAgICAgICAgYWRkUG9wdXBCZWhhdmlvci5jbG9zZSgpO1xuICAgICAgfSlcbiAgfVxufSk7XG5hZGRQb3B1cEJlaGF2aW9yLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IHVzZXJJbmZvID0gdXNlckluZm9SZW5kZXJlci5nZXRVc2VySW5mbygpO1xuXG4gIGZpZWxkTmFtZS52YWx1ZSA9IHVzZXJJbmZvLm5hbWU7XG4gIGZpZWxkQWJvdXRNZS52YWx1ZSA9IHVzZXJJbmZvLmFib3V0O1xuICBmb3JtVmFsaWRhdG9yc1twb3B1cEVkaXRGb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpXS5yZXNldFZhbGlkYXRpb24oKTtcblxuICBlZGl0UG9wdXBCZWhhdmlvci5zd2l0Y2hCdG5Ub1NhdmUoKTtcbiAgZWRpdFBvcHVwQmVoYXZpb3Iub3BlbigpO1xufSk7XG5cbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbcG9wdXBBZGRGb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgYWRkUG9wdXBCZWhhdmlvci5zd2l0Y2hCdG5Ub0NyZWF0ZSgpO1xuICBhZGRQb3B1cEJlaGF2aW9yLm9wZW4oKTtcbn0pO1xuXG5lZGl0QXZhdGFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1twb3B1cEVkaXRBdmFGb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpXS5yZXNldFZhbGlkYXRpb24oKTtcblxuICBwb3B1cEVkaXRBdmF0YXJSZW5kZXJlci5zd2l0Y2hCdG5Ub1NhdmUoKTtcbiAgcG9wdXBFZGl0QXZhdGFyUmVuZGVyZXIub3BlbigpO1xufSk7XG5cbmNvbnN0IGluaXRBcHAgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBhcGkuZ2V0TXlQcm9maWxlKClcblxuICAgIC50aGVuKChteVByb2ZpbGUpID0+IHtcblxuICAgICAgcGhvdG9Db250YWluZXIuc3JjID0gbXlQcm9maWxlLmF2YXRhcjtcbiAgICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbXlQcm9maWxlLm5hbWU7XG4gICAgICBwcm9maWxlSW5mby50ZXh0Q29udGVudCA9IG15UHJvZmlsZS5hYm91dDtcbiAgICAgIGFwaS5nZXRJbml0aWFsQ2FyZHMoKVxuICAgICAgICAudGhlbigoY2FyZHMpID0+IHtcbiAgICAgICAgICBjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2FyZC5vd25lci5faWQgPT09IG15UHJvZmlsZS5faWQpIHtcbiAgICAgICAgICAgICAgY2FyZC5pc01pbmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FyZFJlbmRlcmVyLnJlbmRlcmVyKGNhcmQpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgfSlcbn07XG5cbmluaXRBcHAoKTsiLCJleHBvcnQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoZmV0Y2hEYXRhKSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGZldGNoRGF0YS5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBmZXRjaERhdGEuaGVhZGVycztcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2V0TXlQcm9maWxlKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBkZWxldGUoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcG9zdE5ld0NhcmREYXRhKGNhcmQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGNhcmQubmFtZSxcbiAgICAgICAgbGluazogY2FyZC5saW5rXG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIHBhdGNoUHJvZmlsZURhdGEoZWRpdEZpZWxkcykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGVkaXRGaWVsZHMucHJvZmlsZU5hbWUsXG4gICAgICAgIGFib3V0OiBlZGl0RmllbGRzLnByb2ZpbGVBYm91dFxuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBwYXRjaEF2YXRhcihmaWVsZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGZpZWxkLnZhbHVlLFxuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICByZW1vdmVMaWtlKGl0ZW1JZCkge1xuICAgIHJldHVybiBmZXRjaChgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMi9jYXJkcy9saWtlcy8ke2l0ZW1JZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGFkZExpa2UoaXRlbUlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7aXRlbUlkfWAsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNvbWVQb3B1cCkge1xuICAgIHN1cGVyKHNvbWVQb3B1cCk7XG4gICAgdGhpcy5fcG9wdXBDYXJkSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcmQtaW1nJyk7XG4gICAgdGhpcy5fcG9wdXBDYXJkVGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcmQtdGl0bGUnKTtcbiAgfVxuXG4gIG9wZW4gPSAoZXZ0KSA9PiB7XG4gICAgdGhpcy5fcG9wdXBDYXJkSW1hZ2Uuc3JjID0gZXZ0LnRhcmdldC5zcmM7XG4gICAgdGhpcy5fcG9wdXBDYXJkSW1hZ2UuYWx0ID0gZXZ0LnRhcmdldC5hbHQ7XG4gICAgdGhpcy5fcG9wdXBDYXJkVGl0bGUudGV4dENvbnRlbnQgPSBldnQudGFyZ2V0LmFsdDtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH07XG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoQXZhRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBzb21lUG9wdXAsIGNhbGxCYWNrIH0pIHtcbiAgICBzdXBlcihzb21lUG9wdXApO1xuICAgIHRoaXMuX2NhbGxCYWNrID0gY2FsbEJhY2s7XG4gICAgdGhpcy5fZmllbGQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0Jyk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgdGhpcy5fc2F2ZUJ0biA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idG4nKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fY2FsbEJhY2sodGhpcy5fZmllbGQsIHRoaXMuX3NhdmVCdG4pO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBzd2l0Y2hCdG5Ub1NhdmUoKSB7XG4gICAgdGhpcy5fc2F2ZUJ0bi50ZXh0Q29udGVudCA9ICdTYXZlJztcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gIH1cbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XG4gICAgLy8gdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XG4gIH1cblxuICBfY2xlYXIoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gIH1cblxuICAvLyByZW5kZXJJdGVtcygpIHtcbiAgLy8gICB0aGlzLl9jbGVhcigpO1xuXG4gIC8vICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gIC8vICAgICB0aGlzLnJlbmRlcmVyKGl0ZW0pO1xuICAvLyAgIH0pO1xuICAvLyB9XG4gIGFkZFByZXBlbmRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcbiAgfVxuXG4gIGFkZEFwcGVuZEl0ZW0oaXRlbSkge1xuXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChpdGVtKTtcblxuICB9XG59OyIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHVzZXJOYW1lLCB1c2VyQWJvdXQpIHtcbiAgICB0aGlzLl9uYW1lID0gdXNlck5hbWU7XG4gICAgdGhpcy5fYWJvdXQgPSB1c2VyQWJvdXQ7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgdXNlckluZm9MaXN0ID0ge307XG4gICAgdXNlckluZm9MaXN0Lm5hbWUgPSB0aGlzLl9uYW1lLnRleHRDb250ZW50O1xuICAgIHVzZXJJbmZvTGlzdC5hYm91dCA9IHRoaXMuX2Fib3V0LnRleHRDb250ZW50O1xuICAgIHJldHVybiB1c2VySW5mb0xpc3Q7XG4gIH1cbiAgc2V0VXNlckluZm8obmV3VXNlckRhdGEpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmV3VXNlckRhdGEucHJvZmlsZU5hbWU7XG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBuZXdVc2VyRGF0YS5wcm9maWxlQWJvdXQ7XG4gIH1cbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwIiwiYm9keSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGUiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVJbmZvIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsInBvcHVwRWRpdCIsInBvcHVwQWRkIiwicG9wdXBEZWxldGUiLCJwaG90b0NvbnRhaW5lciIsInBvcHVwRWRpdEF2YXRhciIsInBvcHVwRWRpdEF2YUZvcm0iLCJlZGl0QXZhdGFyQnRuIiwicG9wdXBEZWxldGVZZXNCdXR0b24iLCJwb3B1cENhcmQiLCJwb3B1cEVkaXRGb3JtIiwiZmllbGROYW1lIiwiZmllbGRBYm91dE1lIiwicG9wdXBBZGRGb3JtIiwiY2FyZHNMaXN0IiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2VsZWN0b3JzIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZGlzYWJsZUJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwicmVtb3ZlIiwicmVtb3ZlQXR0cmlidXRlIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwidGV4dENvbnRlbnQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInNvbWVQb3B1cCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfcG9wdXAiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZUNsaWNrQ2xvc2UiLCJQb3B1cFdpdGhGb3JtIiwiY2FsbEJhY2siLCJzdXBlciIsIl9jYWxsQmFjayIsIl9maWVsZHMiLCJfcG9wdXBGb3JtIiwiX3NhdmVCdG4iLCJnZXRJbnB1dFZhbHVlcyIsImZpZWxkc0xpc3QiLCJmaWVsZCIsIm5hbWUiLCJ2YWx1ZSIsInN3aXRjaEJ0blRvQ3JlYXRlIiwic3dpdGNoQnRuVG9TYXZlIiwicmVzZXQiLCJDYXJkIiwiY2FyZERhdGEiLCJjYXJkVGVtcGxhdGUiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVCaW5DbGljayIsImhhbmRsZUxpa2VDbGljayIsIl9lbGVtZW50IiwiX25hbWUiLCJfbGluayIsImxpbmsiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2NhcmRUZW1wbGF0ZSIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwiX2xpa2VCdXR0b24iLCJfbGlrZXNBbW91bnQiLCJfZGVsZXRlQnV0dG9uIiwiX2hhbmRsZUJpbkNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9taW5lQ2FyZCIsImlzTWluZSIsIl9teU5ld0NhcmQiLCJteU5ld0NhcmQiLCJfY2FyZExpa2VzIiwibGlrZXMiLCJfaW5pdGlhbExpa2VzIiwibGVuZ3RoIiwiY29udGVudCIsImNsb25lTm9kZSIsImNyZWF0ZUNhcmQiLCJzcmMiLCJhbHQiLCJfYWRkRGVsZXRlQnV0dG9uVG9OZXdDYXJkIiwiX2hhbmRsZUxpa2VJbml0QW1vdW50IiwiYWRkTGlrZSIsInJlbW92ZUxpa2UiLCJ0b2dnbGVMaWtlIiwibXlJZCIsImxpa2UiLCJfaWQiLCJhZGREZWxldGVCdXR0b24iLCJteUxpa2UiLCJnZXRFbGVtZW50QnlJZCIsImhlYWRlckxvZ29TcmMiLCJhcGkiLCJmZXRjaERhdGEiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZ2V0TXlQcm9maWxlIiwiZGVsZXRlIiwiY2FyZElkIiwibWV0aG9kIiwicG9zdE5ld0NhcmREYXRhIiwiY2FyZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXRjaFByb2ZpbGVEYXRhIiwiZWRpdEZpZWxkcyIsImFib3V0IiwicHJvZmlsZUFib3V0IiwicGF0Y2hBdmF0YXIiLCJhdmF0YXIiLCJpdGVtSWQiLCJhdXRob3JpemF0aW9uIiwiZm9ybVZhbGlkYXRvcnMiLCJjb25maWciLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsInBvcHVwQ2FyZFJlbmRlcmVyIiwiX3BvcHVwQ2FyZEltYWdlIiwiX3BvcHVwQ2FyZFRpdGxlIiwicG9wdXBEZWxldGVSZW5kZXJlciIsInBvcHVwRWRpdEF2YXRhclJlbmRlcmVyIiwiX2ZpZWxkIiwic2F2ZUJ0biIsIml0ZW0iLCJvbmNsaWNrIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsIm15UHJvZmlsZSIsImNhcmRSZW5kZXJlciIsImNvbnRhaW5lciIsInJlbmRlcmVyIiwiX2NvbnRhaW5lciIsIl9jbGVhciIsImlubmVySFRNTCIsImFkZFByZXBlbmRJdGVtIiwicHJlcGVuZCIsImFkZEFwcGVuZEl0ZW0iLCJhcHBlbmQiLCJjYXJkRWxlbWVudCIsInVzZXJJbmZvUmVuZGVyZXIiLCJ1c2VyTmFtZSIsInVzZXJBYm91dCIsIl9hYm91dCIsImdldFVzZXJJbmZvIiwidXNlckluZm9MaXN0Iiwic2V0VXNlckluZm8iLCJuZXdVc2VyRGF0YSIsImVkaXRQb3B1cEJlaGF2aW9yIiwiYWRkUG9wdXBCZWhhdmlvciIsImFkZEZpZWxkcyIsIm5ld0NhcmQiLCJwbGFjZVRpdGxlIiwicGxhY2VMaW5rIiwidXNlckluZm8iLCJhc3luYyIsImNhcmRzIiwib3duZXIiLCJpbml0QXBwIl0sInNvdXJjZVJvb3QiOiIifQ==